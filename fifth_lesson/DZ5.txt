1)

mysql> SELECT * FROM users;
+----+--------------------+-------------+---------------------+---------------------+
| id | name               | birthday_at | created_at          | updated_at          |
+----+--------------------+-------------+---------------------+---------------------+
|  1 | Геннадий           | 1990-10-05  | 2020-04-30 18:22:25 | 2020-04-30 18:22:25 |
|  2 | Наталья            | 1984-11-12  | 2020-04-30 18:22:25 | 2020-04-30 18:22:25 |
|  3 | Александр          | 1985-05-20  | 2020-04-30 18:22:25 | 2020-04-30 18:22:25 |
|  4 | Сергей             | 1988-02-14  | 2020-04-30 18:22:25 | 2020-04-30 18:22:25 |
|  5 | Иван               | 1998-01-12  | 2020-04-30 18:22:25 | 2020-04-30 18:22:25 |
|  6 | Мария              | 1992-08-29  | 2020-04-30 18:22:25 | 2020-04-30 18:22:25 |
+----+--------------------+-------------+---------------------+---------------------+
6 rows in set (0,00 sec)

mysql> UPDATE users SET created_at = NOW(), updated_at = NOW();
Query OK, 6 rows affected (0,01 sec)
Rows matched: 6  Changed: 6  Warnings: 0

mysql> SELECT * FROM users;
+----+--------------------+-------------+---------------------+---------------------+
| id | name               | birthday_at | created_at          | updated_at          |
+----+--------------------+-------------+---------------------+---------------------+
|  1 | Геннадий           | 1990-10-05  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  2 | Наталья            | 1984-11-12  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  3 | Александр          | 1985-05-20  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  4 | Сергей             | 1988-02-14  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  5 | Иван               | 1998-01-12  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  6 | Мария              | 1992-08-29  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
+----+--------------------+-------------+---------------------+---------------------+
6 rows in set (0,00 sec)


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2)

mysql> ALTER TABLE users CHANGE created_at created_at VARCHAR(255);
Query OK, 6 rows affected (0,06 sec)

mysql> ALTER TABLE users CHANGE updated_at updated_at VARCHAR(255);
Query OK, 6 rows affected (0,04 sec)

mysql> desc users;
+-------------+-----------------+------+-----+---------+----------------+
| Field       | Type            | Null | Key | Default | Extra          |
+-------------+-----------------+------+-----+---------+----------------+
| id          | bigint unsigned | NO   | PRI | NULL    | auto_increment |
| name        | varchar(255)    | YES  |     | NULL    |                |
| birthday_at | date            | YES  |     | NULL    |                |
| created_at  | varchar(255)    | YES  |     | NULL    |                |
| updated_at  | varchar(255)    | YES  |     | NULL    |                |
+-------------+-----------------+------+-----+---------+----------------+
5 rows in set (0,00 sec)

mysql> SELECT * FROM users;
+----+--------------------+-------------+---------------------+---------------------+
| id | name               | birthday_at | created_at          | updated_at          |
+----+--------------------+-------------+---------------------+---------------------+
|  1 | Геннадий           | 1990-10-05  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  2 | Наталья            | 1984-11-12  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  3 | Александр          | 1985-05-20  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  4 | Сергей             | 1988-02-14  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  5 | Иван               | 1998-01-12  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
|  6 | Мария              | 1992-08-29  | 2020-05-01 12:07:07 | 2020-05-01 12:07:07 |
+----+--------------------+-------------+---------------------+---------------------+

mysql> UPDATE users SET created_at = '20.10.2017 8:10', updated_at = '20.10.2017 8:10';
Query OK, 6 rows affected (0,00 sec)
Rows matched: 6  Changed: 6  Warnings: 0

mysql> SELECT * FROM users;
+----+--------------------+-------------+-----------------+-----------------+
| id | name               | birthday_at | created_at      | updated_at      |
+----+--------------------+-------------+-----------------+-----------------+
|  1 | Геннадий           | 1990-10-05  | 20.10.2017 8:10 | 20.10.2017 8:10 |
|  2 | Наталья            | 1984-11-12  | 20.10.2017 8:10 | 20.10.2017 8:10 |
|  3 | Александр          | 1985-05-20  | 20.10.2017 8:10 | 20.10.2017 8:10 |
|  4 | Сергей             | 1988-02-14  | 20.10.2017 8:10 | 20.10.2017 8:10 |
|  5 | Иван               | 1998-01-12  | 20.10.2017 8:10 | 20.10.2017 8:10 |
|  6 | Мария              | 1992-08-29  | 20.10.2017 8:10 | 20.10.2017 8:10 |
+----+--------------------+-------------+-----------------+-----------------+
6 rows in set (0,00 sec)

mysql> UPDATE users SET created_at = STR_TO_DATE(created_at, '%d.%m.%Y %k:%i');
Query OK, 6 rows affected (0,01 sec)
Rows matched: 6  Changed: 6  Warnings: 0

mysql> UPDATE users SET updated_at = STR_TO_DATE(updated_at, '%d.%m.%Y %k:%i');
Query OK, 6 rows affected (0,01 sec)
Rows matched: 6  Changed: 6  Warnings: 0

mysql>  ALTER TABLE users CHANGE created_at created_at DATETIME DEFAULT CURRENT_TIMESTAMP;
Query OK, 0 rows affected (0,02 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql>  ALTER TABLE users CHANGE updated_at updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
Query OK, 0 rows affected (0,01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC users;
+-------------+-----------------+------+-----+-------------------+-----------------------------------------------+
| Field       | Type            | Null | Key | Default           | Extra                                         |
+-------------+-----------------+------+-----+-------------------+-----------------------------------------------+
| id          | bigint unsigned | NO   | PRI | NULL              | auto_increment                                |
| name        | varchar(255)    | YES  |     | NULL              |                                               |
| birthday_at | date            | YES  |     | NULL              |                                               |
| created_at  | datetime        | YES  |     | CURRENT_TIMESTAMP | DEFAULT_GENERATED                             |
| updated_at  | datetime        | YES  |     | CURRENT_TIMESTAMP | DEFAULT_GENERATED on update CURRENT_TIMESTAMP |
+-------------+-----------------+------+-----+-------------------+-----------------------------------------------+
5 rows in set (0,01 sec)

mysql> SELECT * FROM users;
+----+--------------------+-------------+---------------------+---------------------+
| id | name               | birthday_at | created_at          | updated_at          |
+----+--------------------+-------------+---------------------+---------------------+
|  1 | Геннадий           | 1990-10-05  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  2 | Наталья            | 1984-11-12  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  3 | Александр          | 1985-05-20  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  4 | Сергей             | 1988-02-14  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  5 | Иван               | 1998-01-12  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  6 | Мария              | 1992-08-29  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
+----+--------------------+-------------+---------------------+---------------------+
6 rows in set (0,00 sec)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

3)


mysql> SELECT * FROM storehouses_products;
+----+---------------+------------+-------+---------------------+---------------------+
| id | storehouse_id | product_id | value | created_at          | updated_at          |
+----+---------------+------------+-------+---------------------+---------------------+
|  1 |             1 |        400 |    30 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  2 |             1 |       7454 |  6456 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  3 |             1 |      32454 |     0 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  4 |             1 |       3245 |    30 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  5 |             1 |       4325 |    70 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  6 |             1 |        535 |     0 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
+----+---------------+------------+-------+---------------------+---------------------+
6 rows in set (0,00 sec)

mysql> SELECT * FROM storehouses_products ORDER BY IF(value > 0, 0, 1), value;
+----+---------------+------------+-------+---------------------+---------------------+
| id | storehouse_id | product_id | value | created_at          | updated_at          |
+----+---------------+------------+-------+---------------------+---------------------+
|  1 |             1 |        400 |    30 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  4 |             1 |       3245 |    30 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  5 |             1 |       4325 |    70 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  2 |             1 |       7454 |  6456 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  3 |             1 |      32454 |     0 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
|  6 |             1 |        535 |     0 | 2020-05-01 13:13:55 | 2020-05-01 13:13:55 |
+----+---------------+------------+-------+---------------------+---------------------+
6 rows in set (0,00 sec)


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~``
ТЕМА 2

1)
mysql> SELECT * FROM users;
+----+--------------------+-------------+---------------------+---------------------+
| id | name               | birthday_at | created_at          | updated_at          |
+----+--------------------+-------------+---------------------+---------------------+
|  1 | Геннадий           | 1990-10-05  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  2 | Наталья            | 1984-11-12  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  3 | Александр          | 1985-05-20  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  4 | Сергей             | 1988-02-14  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  5 | Иван               | 1998-01-12  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
|  6 | Мария              | 1992-08-29  | 2017-10-20 08:10:00 | 2017-10-20 08:10:00 |
+----+--------------------+-------------+---------------------+---------------------+
6 rows in set (0,00 sec)


mysql> SELECT TIMESTAMPDIFF(YEAR,birthday_at, NOW()) AS age FROM users;
+------+
| age  |
+------+
|   29 |
|   35 |
|   34 |
|   32 |
|   22 |
|   27 |
+------+
6 rows in set (0,00 sec)


mysql> SELECT AVG(TIMESTAMPDIFF(YEAR,birthday_at, NOW())) AS age FROM users;
+---------+
| age     |
+---------+
| 29.8333 |
+---------+ 
1 row in set (0,00 sec)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2)

mysql> SELECT DATE_FORMAT(DATE(CONCAT_WS('-', YEAR(NOW()),MONTH(birthday_at), DAY(BIRTHDAY_AT))), '%W') AS day, COUNT(*)AS total FROM users GROUP BY day ORDER BY total DESC;
+-----------+-------+
| day       | total |
+-----------+-------+
| Monday    |     1 |
| Thursday  |     1 |
| Wednesday |     1 |
| Friday    |     1 |
| Sunday    |     1 |
| Saturday  |     1 |
+-----------+-------+
6 rows in set (0,00 sec)



